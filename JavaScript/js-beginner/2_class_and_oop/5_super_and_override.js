/**
 * =====================================================================
 * JavaScript super & override - í•™ìŠµ + ì‹¤ë¬´ í…œí”Œë¦¿ (2026)
 * =====================================================================
 * â­ = ì‹¤ë¬´ì—ì„œ ìì£¼ ì”€ / ğŸ”¥ = ì¤‘ìš”Â·ì‹¬í™” í¬ì¸íŠ¸ / ğŸ›¡ï¸ = ë°©ì–´ì  ì½”ë”©(Safety)
 *
 * [í•µì‹¬ì •ë¦¬(ë¨¼ì € ì½ê¸°) ğŸ”¥]
 * 1) super()ëŠ” "ë¶€ëª¨ ìƒì„±ì í˜¸ì¶œ"ì´ë‹¤. ìì‹ ì¸ìŠ¤í„´ìŠ¤(this)ë¥¼ ë§Œë“¤ê¸° ìœ„í•œ ì²« ë‹¨ê³„.
 * 2) ìì‹ constructorê°€ ìˆìœ¼ë©´ super(...)ëŠ” "ë°˜ë“œì‹œ" ë¨¼ì € í˜¸ì¶œí•´ì•¼ í•œë‹¤.
 *    - ì™œ? super í˜¸ì¶œ ì „ì—ëŠ” thisê°€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤(ReferenceError).
 * 3) ì˜¤ë²„ë¼ì´ë”©(override)ì€ "ë©”ì„œë“œ ì´ë¦„ì€ ìœ ì§€"í•˜ê³  "ë™ì‘ë§Œ ë³€ê²½"í•œë‹¤. â­
 * 4) super.method()ëŠ” ë¶€ëª¨ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì§€ë§Œ, this ë°”ì¸ë”©ì€ "í˜„ì¬ ì¸ìŠ¤í„´ìŠ¤"ë¥¼ ìœ ì§€í•œë‹¤. ğŸ”¥
 * 5) static ë©”ì„œë“œì—ì„œ superëŠ” "ë¶€ëª¨ í´ë˜ìŠ¤"ë¥¼ ê°€ë¦¬í‚¤ê³ , ë‚´ë¶€ thisëŠ” "ìì‹ í´ë˜ìŠ¤"ê°€ ë  ìˆ˜ ìˆë‹¤(ë‹¤í˜•ì„±). ğŸ”¥
 * 6) ê°ì²´ ë¦¬í„°ëŸ´ì—ì„œë„ ë©”ì„œë“œ ì¶•ì•½í˜•(foo(){})ì´ë©´ superë¥¼ ì“¸ ìˆ˜ ìˆë‹¤. (ì¼ë°˜ í•¨ìˆ˜ í‘œí˜„ì‹ì€ ë¶ˆê°€) ğŸ”¥
 */

console.clear?.();

// ---------------------------------------------------------------------
// [Utility] ì¶œë ¥ í¬ë§·íŒ… (í•™ìŠµ ê°€ë…ì„±ìš©)
// ---------------------------------------------------------------------
const line = (n = 78) => '='.repeat(n);
const section = (title) => {
   console.log(`\n${line()}`);
   console.log(`â–¶ ${title}`);
   console.log(line());
};

// =====================================================================
// 1) [ì´ˆê¸‰] super()ì˜ ë£°: constructorì—ì„œì˜ super
// =====================================================================
{
   section('1. [ì´ˆê¸‰] constructorì—ì„œ super() (this ìƒì„± ê·œì¹™)');

   class IdolModel {
      name;
      year;

      constructor(name, year) {
         this.name = name;
         this.year = year;
      }

      sayHello() {
         return `ì•ˆë…•í•˜ì„¸ìš”, ${this.name}ì…ë‹ˆë‹¤.`;
      }
   }

   class FemaleModel extends IdolModel {
      part;

      constructor(name, year, part) {
         // ğŸ›¡ï¸ super() ì „ì— this ì ‘ê·¼í•˜ë©´ ReferenceError
         // ì™œ? ìì‹ í´ë˜ìŠ¤ëŠ” ë¶€ëª¨ê°€ thisë¥¼ ì„¸íŒ…í•´ì£¼ê¸° ì „ê¹Œì§€ "ë¹ˆ ê»ë°ê¸°" ìƒíƒœ
         // console.log(this); // âŒ ReferenceError

         super(name, year); // âœ… ì—¬ê¸°ì„œ ë¶€ëª¨ê°€ this ì´ˆê¸°í™”ë¥¼ í•´ì¤€ë‹¤.

         this.part = part;
         console.log(`âœ… ${this.name} ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ì™„ë£Œ`);
      }
   }

   const yuJin = new FemaleModel('ì•ˆìœ ì§„', 2003, 'ë³´ì»¬');
   console.log('ë¶€ëª¨ ë©”ì„œë“œ ì‚¬ìš©:', yuJin.sayHello());
}

// =====================================================================
// 2) [ì¤‘ê¸‰] â­ ì˜¤ë²„ë¼ì´ë”© + super.method(): ê¸°ë³¸ ë¡œì§ ì¬ì‚¬ìš©
// =====================================================================
{
   section('2. [ì¤‘ê¸‰] ì˜¤ë²„ë¼ì´ë”© + super.sayHello() (â­ ì‹¤ë¬´ íŒ¨í„´)');

   class IdolModel {
      name;
      constructor(name) {
         this.name = name;
      }

      sayHello() {
         return `ì•ˆë…•í•˜ì„¸ìš”, ${this.name}ì…ë‹ˆë‹¤.`;
      }
   }

   class FemaleModel extends IdolModel {
      part;
      constructor(name, part) {
         super(name);
         this.part = part;
      }

      // â­ ì˜¤ë²„ë¼ì´ë”©: í˜¸ì¶œë¶€(ì‚¬ìš©í•˜ëŠ” ìª½)ì˜ ì½”ë“œëŠ” ê·¸ëŒ€ë¡œ ìœ ì§€í•˜ë©´ì„œ, ë™ì‘ë§Œ í™•ì¥/ë³€ê²½
      // ì™œ? ì™¸ë¶€ëŠ” sayHello()ë§Œ í˜¸ì¶œí•˜ë©´ ë˜ê³ , íƒ€ì…ì— ë”°ë¥¸ ì°¨ì´ëŠ” ë‚´ë¶€ì—ì„œ í•´ê²°(ë‹¤í˜•ì„±)
      sayHello() {
         // ğŸ”¥ super.sayHello()ëŠ” "ë¶€ëª¨ ë©”ì„œë“œ í˜¸ì¶œ"ì´ì§€ë§Œ thisëŠ” í˜„ì¬ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìœ ì§€
         // ì¦‰, IdolModel.prototype.sayHello.call(this) ê°™ì€ ëŠë‚Œ
         return `[Female] ${super.sayHello()} ë‹´ë‹¹ì€ ${this.part}ì…ë‹ˆë‹¤.`;
      }
   }

   const wonYoung = new FemaleModel('ì¥ì›ì˜', 'ë³´ì»¬');
   console.log(wonYoung.sayHello());
}

// =====================================================================
// 3) [ì¤‘ê¸‰] ğŸ”¥ static contextì—ì„œì˜ super: ë¶€ëª¨ í˜¸ì¶œ + thisëŠ” ìì‹(ë‹¤í˜•ì„±)
// =====================================================================
{
   section('3. [ì¤‘ê¸‰] staticì—ì„œ super.create() (this ë‹¤í˜•ì„± ğŸ”¥)');

   class BaseFactory {
      static getType() {
         return 'Base';
      }

      static create() {
         // ì—¬ê¸°ì„œ thisëŠ” "í˜¸ì¶œí•œ í´ë˜ìŠ¤" (ìì‹ì´ í˜¸ì¶œí•˜ë©´ ìì‹)
         return `[${this.getType()}] ìƒì„±ë¨`;
      }
   }

   class IdolFactory extends BaseFactory {
      static getType() {
         return 'Idol';
      }

      static create() {
         // ğŸ”¥ super.create()ëŠ” ë¶€ëª¨ ë©”ì„œë“œë¥¼ ì‹¤í–‰í•˜ì§€ë§Œ,
         // ë¶€ëª¨ ë©”ì„œë“œ ë‚´ë¶€ì˜ thisëŠ” ì—¬ì „íˆ "IdolFactory"(ìì‹)ë¥¼ ê°€ë¦¬í‚¨ë‹¤.
         // ì™œ? ë©”ì„œë“œ í˜¸ì¶œ ì»¨í…ìŠ¤íŠ¸(Receiver)ê°€ ìì‹ì´ê¸° ë•Œë¬¸
         return `${super.create()} (by Starship)`;
      }
   }

   console.log(IdolFactory.create());
   // ì˜ˆìƒ: "[Idol] ìƒì„±ë¨ (by Starship)"
}

// =====================================================================
// 4) [ê³ ê¸‰] ğŸ”¥ ê°ì²´ ë¦¬í„°ëŸ´ì—ì„œì˜ super: ë©”ì„œë“œ ì¶•ì•½í˜•ë§Œ ê°€ëŠ¥
// =====================================================================
{
   section('4. [ê³ ê¸‰] ê°ì²´ ë¦¬í„°ëŸ´ì—ì„œ super (ë©”ì„œë“œ ì¶•ì•½í˜• ğŸ”¥)');

   const parentProto = {
      greet() {
         return 'Hello!';
      },
   };

   const childObj = {
      name: 'ìì‹',

      // âœ… ë©”ì„œë“œ ì¶•ì•½í˜•ì—ì„œëŠ” super ì‚¬ìš© ê°€ëŠ¥
      // ì™œ? ì—”ì§„ì´ [[HomeObject]]ë¥¼ ì„¤ì •í•´ì„œ superê°€ ë¶€ëª¨ë¥¼ ì°¾ì„ ìˆ˜ ìˆê²Œ í•´ì¤Œ
      greet() {
         return `${super.greet()} I am ${this.name}`;
      },

      // âŒ ì¼ë°˜ í•¨ìˆ˜ í‘œí˜„ì‹ì—ì„œëŠ” super ì‚¬ìš© ë¶ˆê°€
      // greet: function () { return super.greet(); } // SyntaxError
   };

   Object.setPrototypeOf(childObj, parentProto);

   console.log(childObj.greet()); // Hello! I am ìì‹
}

// =====================================================================
// 4.5) [ì‹¬í™”] ğŸ”¥ [[HomeObject]]: superê°€ ë¶€ëª¨ë¥¼ ì°¾ëŠ” ë‚´ë¶€ ë©”ì»¤ë‹ˆì¦˜(ë©´ì ‘ìš©)
// =====================================================================
{
   section('4.5 [ì‹¬í™”] [[HomeObject]] (super ë™ì‘ ì›ë¦¬ ğŸ”¥)');

   /**
    * Q. super.method()ëŠ” this.__proto__ë¡œ ë¶€ëª¨ë¥¼ ì°¾ë‚˜ìš”?
    * A. ì•„ë‹ˆë‹¤. superëŠ” [[HomeObject]]ë¼ëŠ” ë‚´ë¶€ ìŠ¬ë¡¯ì„ ì´ìš©í•œë‹¤.
    *
    * í•µì‹¬ë§Œ:
    * - ë©”ì„œë“œ ì¶•ì•½í˜•(foo(){})ì´ë‚˜ class ë©”ì„œë“œëŠ” "ìê¸°ê°€ ì†í•œ ê°ì²´"ë¥¼ [[HomeObject]]ë¡œ ê¸°ì–µ
    * - super.method() í˜¸ì¶œ ì‹œ, [[HomeObject]]ì˜ prototype(ë¶€ëª¨)ì„ ì°¾ì•„ ë©”ì„œë“œë¥¼ ì‹¤í–‰
    *
    * ê·¸ë˜ì„œ ìƒê¸°ëŠ” íŠ¹ì§•:
    * - ë©”ì„œë“œë¥¼ ë‹¤ë¥¸ ê°ì²´ë¡œ ë³µì‚¬í•˜ë©´, superê°€ ê¸°ëŒ€ì™€ ë‹¤ë¥´ê²Œ ë™ì‘í•  ìˆ˜ ìˆë‹¤(ì›ë˜ í™ˆ ê¸°ì¤€).
    */

   // ì‹¤í–‰ ì½”ë“œê°€ ê¼­ í•„ìš”í•˜ì§„ ì•Šì§€ë§Œ, í•™ìŠµ íë¦„ìƒ ì§§ê²Œ ë¡œê·¸ë§Œ ë‚¨ê¹€
   console.log(
      '[[HomeObject]]ëŠ” ì—”ì§„ ë‚´ë¶€ ìŠ¬ë¡¯ì´ë¼ ì§ì ‘ ì¶œë ¥í•  ìˆ˜ëŠ” ì—†ì–´ìš”. (ê°œë… ì²´í¬ìš©)',
   );
}

// =====================================================================
// 5) [ì‹¤ë¬´íŒ¨í„´] â­ ë¼ì´í”„ì‚¬ì´í´ í™•ì¥: superë¡œ ì½”ì–´ ë¡œì§ ìœ ì§€ + ë‚´ ê¸°ëŠ¥ ì¶”ê°€
// =====================================================================
{
   section('5. [ì‹¤ë¬´íŒ¨í„´] ë¼ì´í”„ì‚¬ì´í´ í™•ì¥ íŒ¨í„´ (â­ superë¡œ ì½”ì–´ ë³´ì¥)');

   /**
    * ì‹¤ë¬´ì—ì„œ superë¥¼ ê°€ì¥ ë§ì´ ì“°ëŠ” ìƒí™©:
    * - í”„ë ˆì„ì›Œí¬/ë¼ì´ë¸ŒëŸ¬ë¦¬(ë¶€ëª¨)ê°€ í•µì‹¬ ë¡œì§ì„ ê°€ì§„ ë©”ì„œë“œë¥¼ ì œê³µ
    * - ìš°ë¦¬ëŠ” ê·¸ ìœ„ì— ê¸°ëŠ¥ì„ "ì¶”ê°€"í•´ì•¼ í•¨
    *
    * ì™œ superë¥¼ ë¨¼ì € ë¶€ë¥´ë‚˜?
    * - ë¶€ëª¨ê°€ í•„ìˆ˜ ì„¸íŒ…(ì´ë²¤íŠ¸/ì´ˆê¸°í™”)ì„ í•œë‹¤ë©´,
    *   ê·¸ê±¸ ë¹¼ë¨¹ìœ¼ë©´ ë²„ê·¸ê°€ "ì¡°ìš©íˆ" ìƒê¸°ê¸° ì‰½ë‹¤. ğŸ›¡ï¸
    */

   class Component {
      constructor() {
         this.state = {};
      }

      connectedCallback() {
         console.log('ğŸ”¹ [Core] ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì—°ê²°');
         console.log('ğŸ”¹ [Core] ì´ˆê¸° ë°ì´í„° ë¡œë”©');
      }
   }

   class MyWidget extends Component {
      constructor() {
         super();
         this.state = { active: true };
      }

      connectedCallback() {
         // â­ ë¶€ëª¨ì˜ ì½”ì–´ ë¡œì§ì„ ë¨¼ì € ì‹¤í–‰
         super.connectedCallback();

         // ê·¸ ë‹¤ìŒ ë‚´ ê¸°ëŠ¥ì„ ë§ë¶™ì¸ë‹¤
         console.log('ğŸ”¸ [Widget] ì»¤ìŠ¤í…€ UI ë Œë”ë§');
         console.log('ğŸ”¸ [Widget] ì• ë‹ˆë©”ì´ì…˜ ì‹œì‘');
      }
   }

   const widget = new MyWidget();
   widget.connectedCallback();
}

// =====================================================================
// 6) [í•µì‹¬ì •ë¦¬] ë³µìŠµ ì²´í¬ë¦¬ìŠ¤íŠ¸ 12ê°œ âœ…
// =====================================================================
{
   section('6. [í•µì‹¬ì •ë¦¬] ë³µìŠµ ì²´í¬ë¦¬ìŠ¤íŠ¸ 12ê°œ âœ…');

   const checklist = [
      'super()ëŠ” ë¶€ëª¨ ìƒì„±ìë¥¼ í˜¸ì¶œí•´ this ì´ˆê¸°í™”ë¥¼ ì‹œì‘í•œë‹¤. ğŸ”¥',
      'ìì‹ constructorê°€ ìˆìœ¼ë©´ super(...)ëŠ” ë°˜ë“œì‹œ ë¨¼ì € í˜¸ì¶œí•´ì•¼ í•œë‹¤. ğŸ”¥',
      'super í˜¸ì¶œ ì „ this ì ‘ê·¼ì€ ReferenceErrorê°€ ë‚œë‹¤. ğŸ›¡ï¸',
      'ì˜¤ë²„ë¼ì´ë”©ì€ ë©”ì„œë“œ ì´ë¦„ì„ ìœ ì§€í•œ ì±„ ë™ì‘ë§Œ ë³€ê²½í•œë‹¤. â­',
      'super.method()ë¡œ ë¶€ëª¨ì˜ ê¸°ë³¸ ë¡œì§ì„ ì¬ì‚¬ìš©í•˜ë©´ì„œ í™•ì¥í•  ìˆ˜ ìˆë‹¤. â­',
      'super.method() í˜¸ì¶œ ì‹œ thisëŠ” í˜„ì¬ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìœ ì§€í•œë‹¤. ğŸ”¥',
      'static ë©”ì„œë“œì—ì„œ superëŠ” ë¶€ëª¨ í´ë˜ìŠ¤ë¥¼ ê°€ë¦¬í‚¨ë‹¤. ğŸ”¥',
      'ë¶€ëª¨ static ë©”ì„œë“œë¥¼ superë¡œ í˜¸ì¶œí•´ë„ ë‚´ë¶€ thisëŠ” ìì‹ì¼ ìˆ˜ ìˆë‹¤(ë‹¤í˜•ì„±). ğŸ”¥',
      'ê°ì²´ ë¦¬í„°ëŸ´ì—ì„œë„ ë©”ì„œë“œ ì¶•ì•½í˜•(foo(){})ì´ë©´ super ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤. ğŸ”¥',
      'ì¼ë°˜ í•¨ìˆ˜ í‘œí˜„ì‹(function(){})ì—ì„œëŠ” superë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤. ğŸ›¡ï¸',
      'superëŠ” [[HomeObject]] ê¸°ë°˜ìœ¼ë¡œ ë¶€ëª¨ë¥¼ ì°¾ëŠ”ë‹¤(ë©´ì ‘ ì‹¬í™”). ğŸ”¥',
      'ì‹¤ë¬´ì—ì„œëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬/í”„ë ˆì„ì›Œí¬ í™•ì¥ ì‹œ superë¡œ ì½”ì–´ ë¡œì§ì„ ë³´ì¥í•œë‹¤. â­',
   ];

   checklist.forEach((item, idx) => {
      console.log(`${String(idx + 1).padStart(2, '0')}. ${item}`);
   });
}

console.log(`\n${line()}`);
console.log('super & override ìµœì¢… í…œí”Œë¦¿ ë! âœ…');
console.log(line());
