/**
 * =====================================================================
 * TypeScript: íƒ€ì… ë³„ì¹­(Type Alias) & ì¸ë±ìŠ¤ ì‹œê·¸ë‹ˆì²˜(Index Signature)
 * =====================================================================
 * Recommended filename: 04_type_alias_index_signature.ts
 *
 * âœ… Keynote (í•µì‹¬ì •ë¦¬ ë¨¼ì €) â­ğŸ”¥
 * - íƒ€ì… ë³„ì¹­(type)ì€ "ê°’ì˜ í˜•íƒœ(êµ¬ì¡°)"ë¥¼ ì¬ì‚¬ìš©í•˜ê¸° ìœ„í•œ ì´ë¦„í‘œ
 * - ì¸ë±ìŠ¤ ì‹œê·¸ë‹ˆì²˜ëŠ” "í‚¤ê°€ ë™ì ìœ¼ë¡œ ëŠ˜ì–´ë‚˜ëŠ” ê°ì²´(ë”•ì…”ë„ˆë¦¬)"ë¥¼ íƒ€ì…ìœ¼ë¡œ í‘œí˜„
 * - ì‹¤ë¬´ì—ì„  Index Signatureë³´ë‹¤ `Record<K,V>` + `keyof` ì¡°í•©ì„ ë” ìì£¼ ì”€ â­
 * - (ìµœì‹ /ê°•ì¶”) `satisfies`ë¡œ "ê²€ì¦ì€ ì—„ê²©í•˜ê²Œ, íƒ€ì…ì€ ê¹”ë”í•˜ê²Œ" ê°€ì ¸ê°ˆ ìˆ˜ ìˆìŒ ğŸ”¥
 */

console.clear?.();

// ---------------------------------------------------------------------
// [Utility] ì¶œë ¥ í¬ë§·(í•™ìŠµ ê°€ë…ì„±)
// ---------------------------------------------------------------------
const line = (n = 70) => '='.repeat(n);
const section = (title: string) => {
   console.log(`\n${line()}\nâ–¶ ${title}\n${line()}`);
};

// =====================================================================
// 1) [ì´ˆê¸‰] type alias: ê°ì²´ "ëª¨ì–‘"ì„ ì´ë¦„ìœ¼ë¡œ ì €ì¥í•˜ê¸°
// =====================================================================
{
   section('1. [ì´ˆê¸‰] type alias ê¸°ë³¸');

   // âœ… User íƒ€ì…(ê°ì²´ êµ¬ì¡°)ì„ "ì¬ì‚¬ìš©"í•˜ê¸° ìœ„í•œ ë³„ì¹­
   // - ì‹¤ë¬´ì—ì„œ API ì‘ë‹µ(User/Profile) ëª¨ë¸ë§ì— ê°€ì¥ ìì£¼ ì“°ì„ â­
   type User = {
      id: number; // number: ìˆ«ì
      name: string; // string: ë¬¸ìì—´
      nickname: string; // ë‹‰ë„¤ì„
      birthYear: number; // ìˆ«ìë¡œ ì €ì¥í•˜ëŠ” í¸ì´ ì‹¤ë¬´ì—ì„œ ê³„ì‚°/ê²€ì¦ì— ìœ ë¦¬ â­
      bio: string; // ì†Œê°œ
      location: string; // ì§€ì—­
   };

   // âœ… íƒ€ì… ë³„ì¹­ì„ ë¶™ì´ë©´ ê°ì²´ë¥¼ ë§Œë“¤ ë•Œ "í•„ìˆ˜ í•„ë“œ ëˆ„ë½"ì„ ì»´íŒŒì¼ ë‹¨ê³„ì—ì„œ ì¡ì•„ì¤Œ
   const user: User = {
      id: 1,
      name: 'ì‹ ì¬ì¤€',
      nickname: 'í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œì', // âœ… ì˜¤íƒ€ ìˆ˜ì •(ê°œë°”ì -> ê°œë°œì)
      birthYear: 1996,
      bio: 'ì•ˆë…•í•˜ì„¸ìš” ğŸ‘‹',
      location: 'ê³ ì–‘ì‹œ',
   };

   console.log('user:', user);
   console.log('user.nickname:', user.nickname);
}

// =====================================================================
// 2) [ì¤‘ê¸‰] íƒ€ì… ì¬ì‚¬ìš©: Optional/Readonly + Union(Literal)
// =====================================================================
{
   section('2. [ì¤‘ê¸‰] Optional/Readonly + Union');

   // â­ Optional(?) : ìˆì„ ìˆ˜ë„, ì—†ì„ ìˆ˜ë„ ìˆìŒ
   // - ì‹¤ë¬´ì—ì„œ "APIì— ì•„ì§ ì €ì¥ ì „"ì¸ ê°ì²´ì— ìì£¼ ë“±ì¥
   type DraftUser = {
      id?: number; // optional -> number | undefined ëŠë‚Œ
      name: string;
      readonly createdAt: string; // ğŸ›¡ï¸ readonly: ìƒì„± ì‹œì  ì´í›„ ë°”ë€Œë©´ ì•ˆ ë˜ëŠ” ê°’ ì ê¸ˆ
   };

   const draft: DraftUser = {
      name: 'í™ê¸¸ë™',
      createdAt: new Date().toISOString(),
   };

   // optionalì€ ì‚¬ìš© ì „ì— ì²´í¬(ì¢íˆê¸°)ê°€ í•„ìš” â­
   const safeId = draft.id ?? -1; // idê°€ ì—†ìœ¼ë©´ -1 ê°™ì€ ê¸°ë³¸ê°’
   console.log('draft:', draft);
   console.log('safeId (draft.id ?? -1):', safeId);

   // ğŸ”¥ Union + Literal: "ìƒíƒœ/ëª¨ë“œ" ëª¨ë¸ë§(Reactì—ì„œ íŠ¹íˆ ìì£¼)
   type Role = 'guest' | 'member' | 'admin';
   const role: Role = 'member';
   console.log('role:', role);
}

// =====================================================================
// 3) [ê³ ê¸‰] Index Signature: í‚¤ê°€ ë™ì ìœ¼ë¡œ ëŠ˜ì–´ë‚˜ëŠ” ê°ì²´ í‘œí˜„
// =====================================================================
{
   section('3. [ê³ ê¸‰] Index Signature (ë”•ì…”ë„ˆë¦¬ íƒ€ì…)');

   // âœ… ì¸ë±ìŠ¤ ì‹œê·¸ë‹ˆì²˜ëŠ” "í‚¤ ì´ë¦„ì„ ë¯¸ë¦¬ ë‹¤ ëª» ì •í•  ë•Œ" ì‚¬ìš©
   // - ì˜ˆ: êµ­ê°€ ì½”ë“œ, i18n ì‚¬ì „, ìºì‹œ ì €ì¥ì†Œ, í™˜ê²½ë³€ìˆ˜ ë§µ
   type CountryCodeMap = {
      [key: string]: string; // ì–´ë–¤ ë¬¸ìì—´ í‚¤ë“  string ê°’ì„ ê°€ì§
   };

   const countryCodes: CountryCodeMap = {
      korea: 'ko',
      unitedStates: 'us', // âœ… í‚¤ ë„¤ì´ë° í†µì¼(UnitedState -> unitedStates)
      unitedKingdom: 'uk',
   };

   console.log('countryCodes.korea:', countryCodes.korea);
   console.log('countryCodes["unitedStates"]:', countryCodes['unitedStates']);

   // âš ï¸ í•¨ì •: index signatureëŠ” "ì•„ë¬´ í‚¤ë‚˜" í—ˆìš©í•˜ë¯€ë¡œ ì˜¤íƒ€ë¥¼ ì»´íŒŒì¼ì´ ëª» ì¡ì„ ìˆ˜ ìˆìŒ
   // console.log(countryCodes['unitedSttaes']); // ëŸ°íƒ€ì„ì—” undefined ê°€ëŠ¥
}

// =====================================================================
// 4) [ì‹¤ë¬´íŒ¨í„´] Record + keyof + satisfies (ì¶”ì²œ ì¡°í•©) â­ğŸ”¥
// =====================================================================
{
   section('4. [ì‹¤ë¬´íŒ¨í„´] Record + keyof + satisfies â­ğŸ”¥');

   // â­ Record<K,V>: "í‚¤ ì§‘í•©"ì„ ì œí•œí•  ìˆ˜ ìˆì–´ ì˜¤íƒ€ ë°©ì§€ì— ê°•í•¨
   type Country = 'korea' | 'unitedStates' | 'unitedKingdom';
   type Code = 'ko' | 'us' | 'uk';

   // âœ… satisfies: ê°ì²´ ê°’ ê²€ì¦ì€ í•˜ë˜, ë¦¬í„°ëŸ´ ì¶”ë¡ ì€ ìœ ì§€(ìµœì‹  ì‹¤ë¬´ì—ì„œ ì¸ê¸° ğŸ”¥)
   const strictCountryCodes = {
      korea: 'ko',
      unitedStates: 'us',
      unitedKingdom: 'uk',
   } satisfies Record<Country, Code>;

   // âœ… keyofë¥¼ ì“°ë©´ "í—ˆìš©ëœ í‚¤"ë§Œ ì¸ìë¡œ ë°›ëŠ” í•¨ìˆ˜ ì‘ì„± ê°€ëŠ¥ â­
   const getCode = (country: keyof typeof strictCountryCodes) => {
      return strictCountryCodes[country];
   };

   console.log('strictCountryCodes:', strictCountryCodes);
   console.log('getCode("korea"):', getCode('korea'));

   // getCode('japan'); // âŒ ì»´íŒŒì¼ ì—ëŸ¬(í‚¤ ì œí•œ ì„±ê³µ)
}

// =====================================================================
// ğŸ›¡ï¸ ë°©ì–´ì  ì½”ë”©: í•¨ì •/ì£¼ì˜ì‚¬í•­ ëª¨ìŒ
// =====================================================================
{
   section('ğŸ›¡ï¸ ë°©ì–´ì  ì½”ë”©: í•¨ì • & ì£¼ì˜ì‚¬í•­');

   /**
    * 1) Index SignatureëŠ” ì˜¤íƒ€ë¥¼ ì¡ê¸° ì–´ë ¤ì›€
    *    - [key: string]: string ì€ "ì–´ë–¤ í‚¤ë“  OK"ë¼ì„œ ì˜ëª»ëœ í‚¤ë„ í†µê³¼ ê°€ëŠ¥
    *    - ê°€ëŠ¥í•œ ê²½ìš° Record + ìœ ë‹ˆì˜¨ í‚¤ë¡œ "í‚¤ ë²”ìœ„"ë¥¼ ì œí•œí•˜ëŠ” ê²Œ ì•ˆì „ â­
    */

   /**
    * 2) Index Signature + íŠ¹ì • í”„ë¡œí¼í‹° í˜¼í•©ì€ ê·œì¹™ì´ ê¹Œë‹¤ë¡œì›€
    *    - ì•„ë˜ì²˜ëŸ¼ íŠ¹ì • í‚¤ë¥¼ ì¶”ê°€í•  ìˆ˜ëŠ” ìˆì§€ë§Œ, ê°’ íƒ€ì…ì´ index signatureì™€ ì¼ì¹˜í•´ì•¼ í•¨
    *      type X = { [k: string]: string; korea: string } // OK
    *      type Y = { [k: string]: number; korea: string } // âŒ koreaê°€ numberì—¬ì•¼ í•¨
    */

   /**
    * 3) í‚¤ í‘œì¤€í™”(ì¼€ì´ì‹±) ë£°ì„ ì •í•´ë¼
    *    - unitedStates vs UnitedState ê°™ì€ í˜¼í•© ì¼€ì´ì‹±ì€ ë°ì´í„° í’ˆì§ˆì„ ë§ì¹¨
    *    - ì‹¤ë¬´ì—ì„  ë³´í†µ lowerCamelCaseë¡œ í†µì¼
    */

   /**
    * 4) (ì°¸ê³ ) íŠœí”Œì˜ push í•¨ì •
    *    - TSì—ì„œ tupleì€ ê¸¸ì´ê°€ ê³ ì •ì²˜ëŸ¼ ë³´ì´ì§€ë§Œ, ëŸ°íƒ€ì„ì€ ë°°ì—´ì´ë¼ pushê°€ ê°€ëŠ¥í•¨
    *    - ë”°ë¼ì„œ "ì •ë§ ê³ ì •"ì´ í•„ìš”í•˜ë©´ readonly tupleì„ ì‚¬ìš©
    *      const t: readonly [number, number] = [1, 2];
    *      // t.push(3) âŒ (readonlyë©´ ë°©ì–´ ê°€ëŠ¥)
    */

   console.log('âœ… ë°©ì–´ ì„¹ì…˜ ì²´í¬ ì™„ë£Œ');
}

// =====================================================================
// âœ… ë³µìŠµ í•µì‹¬ì •ë¦¬ (10~12ê°œ)
// =====================================================================
{
   section('âœ… ë³µìŠµ í•µì‹¬ì •ë¦¬ (10~12ê°œ)');

   const recap = [
      '1) type aliasëŠ” íƒ€ì…(ê°’ì˜ êµ¬ì¡°/ë²”ìœ„)ì— ì´ë¦„ì„ ë¶™ì—¬ ì¬ì‚¬ìš©í•œë‹¤. â­',
      '2) ê°ì²´ íƒ€ì…ì€ ì´ë¦„ì´ ì•„ë‹ˆë¼ â€œêµ¬ì¡°(ëª¨ì–‘)â€ë¡œ í˜¸í™˜ëœë‹¤. ğŸ”¥',
      '3) Optional(?)ì€ ê°’ì´ ì—†ì„ ìˆ˜ ìˆì–´ ì‚¬ìš© ì „ ì²´í¬/ê¸°ë³¸ê°’ì´ í•„ìš”í•˜ë‹¤. â­',
      '4) readonlyëŠ” ìˆ˜ì •ë˜ë©´ ì•ˆ ë˜ëŠ” ê°’ì„ ì»´íŒŒì¼ ë‹¨ê³„ì—ì„œ ì ê·¼ë‹¤. ğŸ›¡ï¸',
      '5) Union + Literalì€ ìƒíƒœ/ëª¨ë“œ ëª¨ë¸ë§ì— ìì£¼ ì“´ë‹¤(React). â­',
      '6) Index SignatureëŠ” í‚¤ê°€ ë™ì ìœ¼ë¡œ ëŠ˜ì–´ë‚˜ëŠ” ë”•ì…”ë„ˆë¦¬ì— ì‚¬ìš©í•œë‹¤.',
      '7) Index SignatureëŠ” ì˜¤íƒ€ í‚¤ë¥¼ ì¡ê¸° ì–´ë µë‹¤(ê°€ëŠ¥í•˜ë©´ í‚¤ ì œí•œ!). ğŸ›¡ï¸',
      '8) Record<K,V>ëŠ” í‚¤ ì§‘í•©ì„ ì œí•œí•´ì„œ ë” ì•ˆì „í•œ ë”•ì…”ë„ˆë¦¬ë¥¼ ë§Œë“ ë‹¤. â­',
      '9) keyofëŠ” â€œí—ˆìš©ëœ í‚¤ë§Œ ë°›ëŠ” í•¨ìˆ˜â€ë¥¼ ë§Œë“¤ ë•Œ í•µì‹¬ì´ë‹¤. ğŸ”¥',
      '10) satisfiesëŠ” â€œê²€ì¦ì€ ì—„ê²©, ì¶”ë¡ ì€ ìœ ì§€â€ë¥¼ ë™ì‹œì— ë§Œì¡±í•œë‹¤. ğŸ”¥',
      '11) ì¼€ì´ì‹±(í‚¤ ë„¤ì´ë°)ì„ í†µì¼í•˜ì§€ ì•Šìœ¼ë©´ ë°ì´í„° í’ˆì§ˆì´ ê¹¨ì§„ë‹¤. ğŸ›¡ï¸',
      '12) íŠœí”Œì€ ëŸ°íƒ€ì„ ë°°ì—´ì´ë¼ push í•¨ì •ì´ ìˆê³  readonlyë¡œ ë°©ì–´í•  ìˆ˜ ìˆë‹¤. ğŸ›¡ï¸',
   ];

   recap.forEach((item) => console.log(item));
}

console.log(`\n${line()}\nâœ… 04 Type Alias & Index Signature DONE\n${line()}`);
