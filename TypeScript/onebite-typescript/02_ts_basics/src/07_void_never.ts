/**
 * =====================================================================
 * TypeScript: void & never - í•™ìŠµ+ì‹¤ë¬´ í…œí”Œë¦¿ (Executable Note)
 * =====================================================================
 * Recommended filename: 07_void_never_controlFlow.ts
 *
 * âœ… Keynote (í•µì‹¬ì •ë¦¬ ë¨¼ì €) â­ðŸ”¥
 * - void: "ë°˜í™˜ê°’ì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤"ë¥¼ í‘œí˜„(í•¨ìˆ˜ ë°˜í™˜ì— ê°€ìž¥ ìžì£¼ ì”€) â­
 * - never: "ì ˆëŒ€ ë°œìƒí•˜ì§€ ì•ŠìŒ"(ë„ë‹¬ ë¶ˆê°€) í‘œí˜„(throw/ë¬´í•œë£¨í”„/ì™„ì „í•œ exhaustiveness) ðŸ”¥
 * - ì‹¤ë¬´ì—ì„œ neverì˜ ì§„ì§œ ê°’ì€: switch/if ë¶„ê¸°ì—ì„œ "ë¹ ì§„ ì¼€ì´ìŠ¤"ë¥¼ ì»´íŒŒì¼ íƒ€ìž„ì— ìž¡ëŠ” ê²ƒ â­ðŸ”¥
 */

console.clear?.();

// ---------------------------------------------------------------------
// [Utility] ì¶œë ¥ í¬ë§·(í•™ìŠµ ê°€ë…ì„±)
// ---------------------------------------------------------------------
const line = (n = 70) => '='.repeat(n);
const section = (title: string) => {
   console.log(`\n${line()}\nâ–¶ ${title}\n${line()}`);
};

// =====================================================================
// 1) [ì´ˆê¸‰] void: "ë¦¬í„´ê°’ì´ ì˜ë¯¸ ì—†ë‹¤" (í•¨ìˆ˜ì— ê°€ìž¥ ë§Žì´ ì”€) â­
// =====================================================================
{
   section('1. [ì´ˆê¸‰] void ê¸°ë³¸ â­');

   // âœ… string ë°˜í™˜ í•¨ìˆ˜: í˜¸ì¶œí•œ ìª½ì´ ê²°ê³¼ë¥¼ "ì‚¬ìš©"í•  ìˆ˜ ìžˆìŒ
   const greet = (): string => {
      return 'Hello'; // string ë°˜í™˜
   };

   // âœ… void ë°˜í™˜ í•¨ìˆ˜: "ë¦¬í„´ì„ ì•ˆ í•œë‹¤"ê°€ ì•„ë‹ˆë¼
   // "ë¦¬í„´ê°’ì„ ì˜ë¯¸ ìžˆê²Œ ì“°ì§€ ì•ŠëŠ”ë‹¤"ì— ê°€ê¹ë‹¤
   const logHello = (): void => {
      console.log('logHello(): Hello'); // ì½˜ì†” ì¶œë ¥(ë¶€ìˆ˜íš¨ê³¼ side effect)
      // return; // voidì—ì„œëŠ” return ê°’ ì—†ì´ ì¢…ë£Œ ê°€ëŠ¥
   };

   console.log('greet() ->', greet());
   logHello();

   // âš ï¸ ë³€ìˆ˜ì— voidë¥¼ ì“°ëŠ” ê±´ ì‹¤ë¬´ì—ì„œ ê±°ì˜ ì—†ìŒ
   // - voidëŠ” í•¨ìˆ˜ ë°˜í™˜ì— ì“°ëŠ” ê²Œ í‘œì¤€
   let v: void;
   v = undefined; // âœ… strict ëª¨ë“œì—ì„œ void ë³€ìˆ˜ì—ëŠ” ì‚¬ì‹¤ìƒ undefinedë§Œ ê°€ëŠ¥
   console.log('void variable ->', v);
}

// =====================================================================
// 2) [ì¤‘ê¸‰] voidì™€ ì½œë°±: ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬/forEachì—ì„œ í”í•¨ â­
// =====================================================================
{
   section('2. [ì¤‘ê¸‰] void ì½œë°± íŒ¨í„´ â­');

   // âœ… forEach ì½œë°±ì€ ë°˜í™˜ê°’ì„ ì“°ì§€ ì•Šìœ¼ë¯€ë¡œ voidê°€ ìžì—°ìŠ¤ëŸ½ë‹¤
   const numbers = [1, 2, 3];

   numbers.forEach((n) => {
      // ì´ ì½œë°±ì˜ ë°˜í™˜ê°’ì€ ì‚¬ìš©ë˜ì§€ ì•ŠìŒ -> ì‹¤ë¬´ì—ì„œ ì´ëŸ° "ë¶€ìˆ˜íš¨ê³¼" ì½œë°±ì´ ë§ŽìŒ
      console.log('forEach item:', n);
   });

   // âœ… ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë„ ë³´í†µ void(ë¦¬í„´ê°’ì„ UI í”„ë ˆìž„ì›Œí¬ê°€ ì“°ì§€ ì•ŠìŒ)
   const onClick = (): void => {
      console.log('clicked!');
   };

   onClick();
}

// =====================================================================
// 3) [ê³ ê¸‰] never: "ì—¬ê¸°ê¹Œì§€ ì˜¤ë©´ ì•ˆ ë¨" (ë„ë‹¬ ë¶ˆê°€) ðŸ”¥
// =====================================================================
{
   section('3. [ê³ ê¸‰] never ê¸°ë³¸ ðŸ”¥');

   // âœ… never: í•¨ìˆ˜ê°€ ì •ìƒ ì¢…ë£Œ(return)ë¡œ ëë‚˜ì§€ ì•ŠëŠ” ê²½ìš°
   // 1) ë¬´í•œ ë£¨í”„
   const runForever = (): never => {
      while (true) {
         // ì—¬ê¸°ì„œ ì ˆëŒ€ ë°˜í™˜í•˜ì§€ ì•ŠìŒ
      }
   };

   // 2) ì˜ˆì™¸ throw
   const fail = (message: string): never => {
      throw new Error(message);
   };

   // âš ï¸ ì‹¤í–‰í•˜ë©´ í”„ë¡œê·¸ëž¨ì´ ë©ˆì¶”ê±°ë‚˜ ì˜ˆì™¸ë¡œ ì¢…ë£Œë˜ë¯€ë¡œ
   // ì•„ëž˜ëŠ” "í…ŒìŠ¤íŠ¸"ê°€ ì•„ë‹ˆë¼ "ì„¤ëª…"ìš©ìœ¼ë¡œë§Œ ë‘”ë‹¤.
   console.log('never í•¨ìˆ˜ëŠ” í˜¸ì¶œí•˜ë©´ ë°˜í™˜ë˜ì§€ ì•ŠìŒ(ì„¤ëª…ìš©)');
   console.log('ì˜ˆ: fail("boom")ì€ ì•„ëž˜ ì¤„ë¡œ ì ˆëŒ€ ì§„í–‰ë˜ì§€ ì•ŠìŒ');

   // runForever(); // âŒ í˜¸ì¶œí•˜ë©´ ì—¬ê¸°ì„œ ë©ˆì¶¤
   // fail('boom'); // âŒ í˜¸ì¶œí•˜ë©´ throw
}

// =====================================================================
// 4) [ì‹¤ë¬´íŒ¨í„´] exhaustiveness check: ë¹ ì§„ ë¶„ê¸°(ì¼€ì´ìŠ¤)ë¥¼ neverë¡œ ìž¡ê¸° â­ðŸ”¥
// =====================================================================
{
   section('4. [ì‹¤ë¬´íŒ¨í„´] neverë¡œ ë¶„ê¸° ëˆ„ë½ ìž¡ê¸° â­ðŸ”¥');

   // âœ… ìƒíƒœ/ëª¨ë“œ ê°™ì€ ê°’ì€ ë¦¬í„°ëŸ´ ìœ ë‹ˆì˜¨ìœ¼ë¡œ ëª¨ë¸ë§í•˜ëŠ” ê²½ìš°ê°€ ë§ŽìŒ
   type RequestState = 'idle' | 'loading' | 'success' | 'error';

   // ðŸ”¥ ì ˆëŒ€ ì˜¤ë©´ ì•ˆ ë˜ëŠ” ê³³ì„ ì»´íŒŒì¼ íƒ€ìž„ì— "ë¹¨ê°„ì¤„"ë¡œ ë§Œë“œëŠ” í•¨ìˆ˜
   const assertNever = (x: never): never => {
      throw new Error(`Unhandled case: ${String(x)}`);
   };

   const renderState = (state: RequestState): string => {
      switch (state) {
         case 'idle':
            return 'ëŒ€ê¸° ì¤‘';
         case 'loading':
            return 'ë¡œë”© ì¤‘...';
         case 'success':
            return 'ì„±ê³µ!';
         case 'error':
            return 'ì—ëŸ¬ ë°œìƒ';
         default:
            // âœ… ì—¬ê¸°ë¡œ ì˜¤ëŠ” ê°’ì€ "ì—†ì–´ì•¼" í•¨
            // ë§Œì•½ RequestStateì— ìƒˆë¡œìš´ ê°’ì´ ì¶”ê°€ë˜ë©´,
            // ì´ defaultì—ì„œ stateê°€ neverê°€ ì•„ë‹ˆê²Œ ë˜ì–´ ì»´íŒŒì¼ ì—ëŸ¬ë¡œ ëˆ„ë½ì„ ìž¡ì•„ì¤Œ â­
            return assertNever(state);
      }
   };

   const demoStates: RequestState[] = ['idle', 'loading', 'success', 'error'];
   demoStates.forEach((s) => console.log(`${s} ->`, renderState(s)));

   // ðŸ§ª ì²´ê° í¬ì¸íŠ¸
   // - RequestStateì— 'pending'ì„ ì¶”ê°€í•˜ê³  switchì— ì¼€ì´ìŠ¤ë¥¼ ì•ˆ ë„£ìœ¼ë©´
   //   defaultì˜ assertNever(state)ì—ì„œ ì»´íŒŒì¼ ì—ëŸ¬ê°€ ë‚˜ì„œ "ëˆ„ë½"ì„ ì¦‰ì‹œ ìž¡ìŒ
}

// =====================================================================
// ðŸ›¡ï¸ ë°©ì–´ì  ì½”ë”©: í•¨ì •/ì£¼ì˜ì‚¬í•­
// =====================================================================
{
   section('ðŸ›¡ï¸ ë°©ì–´ì  ì½”ë”©: í•¨ì • & ì£¼ì˜ì‚¬í•­');

   /**
    * 1) voidëŠ” "ì•„ë¬´ê²ƒë„ ë°˜í™˜í•˜ì§€ ì•ŠëŠ”ë‹¤"ê°€ ì•„ë‹ˆë¼
    *    "ë°˜í™˜ê°’ì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤"ì— ê°€ê¹ë‹¤.
    *    - JSì—ì„œëŠ” return ì—†ì´ undefinedê°€ ë°˜í™˜ë  ìˆ˜ ìžˆìŒ(í•˜ì§€ë§Œ ì˜ë¯¸ ìžˆê²Œ ì“°ì§€ ë§ìž) â­
    */

   /**
    * 2) void ë³€ìˆ˜ ì„ ì–¸ì€ ì‹¤ë¬´ì—ì„œ ê±°ì˜ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.
    *    - voidëŠ” í•¨ìˆ˜ ë°˜í™˜ íƒ€ìž…ì—ì„œ ì£¼ë¡œ ì“°ìž ðŸ›¡ï¸
    */

   /**
    * 3) never í•¨ìˆ˜ëŠ” ì‹¤í–‰í•˜ë©´ ë©ˆì¶”ê±°ë‚˜ throwí•œë‹¤.
    *    - í•™ìŠµ ì½”ë“œì—ì„œ ë¬´í•œë£¨í”„/throwë¥¼ ì‹¤ì œë¡œ í˜¸ì¶œí•˜ë©´ ë””ë²„ê¹…ì´ íž˜ë“¤ ìˆ˜ ìžˆìŒ ðŸ›¡ï¸
    */

   /**
    * 4) assertNever íŒ¨í„´ì€ "ë¶„ê¸° ëˆ„ë½"ì„ ìž¡ëŠ” ë° ìµœê³ ë‹¤.
    *    - enum/union ê¸°ë°˜ ìƒíƒœë¨¸ì‹ , reducer, UI ëª¨ë“œ ì²˜ë¦¬ì—ì„œ ì‹¤ë¬´ ë¹ˆì¶œ â­ðŸ”¥
    */

   /**
    * 5) anyë¥¼ ì„žìœ¼ë©´ never ì²´í¬ê°€ ë¬´ë ¥í™”ë  ìˆ˜ ìžˆë‹¤.
    *    - íƒ€ìž… ì•ˆì •ì„±ì„ ìœ ì§€í•˜ë ¤ë©´ unknown + narrowing ê°™ì€ ì•ˆì „ íŒ¨í„´ì„ ìœ ì§€ ðŸ›¡ï¸
    */

   console.log('âœ… ë°©ì–´ ì„¹ì…˜ ì²´í¬ ì™„ë£Œ');
}

// =====================================================================
// âœ… ë³µìŠµ í•µì‹¬ì •ë¦¬ (10~12ê°œ)
// =====================================================================
{
   section('âœ… ë³µìŠµ í•µì‹¬ì •ë¦¬ (10~12ê°œ)');

   const recap = [
      '1) voidëŠ” í•¨ìˆ˜ ë°˜í™˜ì—ì„œ "ë¦¬í„´ê°’ì„ ì“°ì§€ ì•ŠìŒ"ì„ í‘œí˜„í•œë‹¤. â­',
      '2) void í•¨ìˆ˜ëŠ” ì£¼ë¡œ side effect(ë¡œê·¸/DOM/ìƒíƒœ ë³€ê²½)ë¥¼ ìˆ˜í–‰í•œë‹¤.',
      '3) void ë³€ìˆ˜ ìžì²´ëŠ” ì‹¤ë¬´ì—ì„œ ê±°ì˜ ì“°ì§€ ì•ŠëŠ”ë‹¤. ðŸ›¡ï¸',
      '4) neverëŠ” "ì ˆëŒ€ ë°œìƒí•˜ì§€ ì•ŠìŒ(ë„ë‹¬ ë¶ˆê°€)"ì„ í‘œí˜„í•œë‹¤. ðŸ”¥',
      '5) throwí•˜ëŠ” í•¨ìˆ˜ / ë¬´í•œë£¨í”„ í•¨ìˆ˜ëŠ” neverê°€ ë  ìˆ˜ ìžˆë‹¤.',
      '6) neverëŠ” íƒ€ìž… ì‹œìŠ¤í…œì—ì„œ ê°•ë ¥í•œ ì•ˆì „ìž¥ì¹˜(ëˆ„ë½ ì¼€ì´ìŠ¤ ë°œê²¬)ë¡œ ì“°ì¸ë‹¤. â­ðŸ”¥',
      '7) assertNever(x: never)ëŠ” exhaustiveness checkì˜ í•µì‹¬ì´ë‹¤. â­ðŸ”¥',
      '8) union ê¸°ë°˜ ìƒíƒœ ì²˜ë¦¬(switch)ì—ì„œ ëˆ„ë½ëœ ì¼€ì´ìŠ¤ë¥¼ ì»´íŒŒì¼ íƒ€ìž„ì— ìž¡ì„ ìˆ˜ ìžˆë‹¤. â­',
      '9) enum/union/ë¦¬í„°ëŸ´ íƒ€ìž…ê³¼ ê²°í•©í•˜ë©´ ìƒíƒœë¨¸ì‹  ì„¤ê³„ê°€ ë‹¨ë‹¨í•´ì§„ë‹¤. ðŸ”¥',
      '10) never í•¨ìˆ˜ëŠ” ì‹¤í–‰í•˜ë©´ ë©ˆì¶”ê±°ë‚˜ ì¢…ë£Œë˜ë¯€ë¡œ í•™ìŠµ ì½”ë“œì—ì„  í˜¸ì¶œ ì£¼ì˜. ðŸ›¡ï¸',
      '11) anyê°€ ì„žì´ë©´ never ê¸°ë°˜ ì•ˆì „ìž¥ì¹˜ê°€ ì•½í•´ì§ˆ ìˆ˜ ìžˆë‹¤. ðŸ›¡ï¸',
      '12) ê²°ë¡ : voidëŠ” "ì‚¬ìš© ì•ˆ í•¨", neverëŠ” "ì ˆëŒ€ ì—†ìŒ"ì´ë‹¤. â­',
   ];

   recap.forEach((item) => console.log(item));
}

console.log(`\n${line()}\nâœ… 07 void & never Executable Note DONE\n${line()}`);
